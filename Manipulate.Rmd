---
title: "Manipulate"
author: "Tommy Liu"
date: '2023-09-04'
written/online source used: "none"
Help obtained: "none"
Statement: "I/we confirm that the above list of sources is complete AND that I/we have not talked to anyone else about the solution to this problem."
output:
  pdf_document: default
  html_document: default
  word_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(leaflet)    # The map-making package
library(geojsonio)  # A package for geographic and spatial data, requires the latest version of dplyr
library(dplyr)      # Used for data manipulation and merging
library(htmltools)  # Used for constructing map labels using HTML
library(ggplot2)
library(tidyverse) 


rawDF <- read_csv("data/raw_data.csv") 

# This block visualizes the trends of total co2 emossion by year 
observationDF <- rawDF %>% 
  group_by(year) %>% 
  summarise(total = sum(co2))
observationDF %>%  ggplot(mapping = aes(x = year, y = total)) +
  geom_smooth()

rawDF <- rawDF %>% filter(year > 1850) 

 max(rawDF $ year)

maniDF <- rawDF %>% mutate(country = case_when(
  country == "United States" ~ "United States of America",
  TRUE ~ country
))

maniDF <- maniDF  %>%  
  mutate(
    ghg_per_gdp = total_ghg / gdp,
    methane_per_gdp = methane / gdp,
    nitrous_oxide_per_gdp = nitrous_oxide / gdp
  )


maniDF %>% write_csv("data/rawDF.csv")

selectDF <- maniDF[, c("country", "year", "co2", "population", "gdp")]
```

